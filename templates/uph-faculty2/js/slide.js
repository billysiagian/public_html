/* Javscript Document  */ jQuery(document).ready(function() { var wmslide_total = jQuery("#slide-img > div.imageb-div").length; var wmslide_img = new Array(); var wmslide_maxP = 15; var wmslide_page = 1; var wmslide_last = 1; var wmslide_prev = 0; var wmslide_lastPos = 0; var wmslide_play = 1; var wmslide_fint = 0; var wmslide_first = 1; wmslide_img[0] = 1; function getPage(max, page) { var start = (page-1) * wmslide_maxP; if (start < 0) start = 0; var end = start + wmslide_maxP; if (end > max) end = max; return new Array(start, end); } function getLastPage(index) { wmslide_page = parseInt(index/wmslide_maxP); if (index % wmslide_maxP > 0) wmslide_page++; return wmslide_page; } wmslide_last = getLastPage(wmslide_total); function setPage(index) { wmslide_page = getLastPage(index); if (wmslide_page < 1) wmslide_page = 1; else if (wmslide_page > wmslide_last) wmslide_page = wmslide_last; } function isInteger(s) { return (/^-?\d+$/.test(s+'')); } function resetPosColor(prev, lastPos, img_small, type) { jQuery("#slide-img > div.imageb-div").each(function(index) { var wm_el = this; var wm_tx = jQuery("#slide-welcome > div.textb-div:eq(" + index + ")"); var wm_et = jQuery("#slide-number > div.images-div:eq(" + index + ")"); var wm_at = jQuery(wm_et).find("div.btn-act"); if (jQuery(wm_el).css("display") != "none") { if (prev == index && type == 1) { var wm_txin = jQuery(wm_el).find("div.text"); var wm_bgtxin = jQuery(wm_el).find("div.bgtext"); hideText(wm_bgtxin, wm_txin, index, 1000); jQuery(wm_el).delay(1000).fadeOut(3000); if (jQuery(wm_tx).length != 0) { jQuery(wm_tx).delay(2000).fadeTo(50, 1, function() { jQuery(wm_tx).hide(); }); } if (jQuery(wm_at).length != 0) { jQuery(wm_et).delay(2000).fadeTo(50, 1, function() { jQuery(wm_at).attr("class", "btn-act nactive"); }); } } else { jQuery(wm_el).hide(); jQuery(wm_el).stop(); if (jQuery(wm_tx).length != 0) { jQuery(wm_tx).hide(); jQuery(wm_tx).stop(); } if (jQuery(wm_at).length != 0) { jQuery(wm_at).attr("class", "btn-act nactive"); jQuery(wm_et).stop(); } } /* if (prev == index && type == 1) { jQuery(wm_el).filter(":visible").fadeOut(3000); wmslide_ftim = setTimeout(function() {jQuery(wm_el).hide();jQuery(wm_el).stop();jQuery(wm_el).css("opacity", '1');}, 1000); } else { jQuery(wm_el).hide(); jQuery(wm_el).stop(); } */ } }); if (img_small) { var paging = getPage(wmslide_total, wmslide_page); if (lastPos < paging[0] || lastPos >= paging[1]) { jQuery("#slide-number > div.images-div").each(function(index) { if (jQuery(this).css("display") != "none") { var wm_el = this; var wm_at = jQuery(wm_el).find("div.btn-act"); if (jQuery(wm_at).length != 0) { jQuery(wm_at).attr("class", "btn-act nactive"); } jQuery("#slide-number > div.images-div:eq(" + index + ") > div").attr("class", "btn-over btn-down"); jQuery(this).hide(); } }); } } } function downloadImageSmall(index, show, time, first) { var wm_el = jQuery("#slide-number > div.images-div:eq(" + index + ")"); var wm_em = jQuery(wm_el).find("img"); if (jQuery(wm_em).length != 0) { var ht = jQuery(wm_em).attr("src"); var re1 = /blank\.png$/i; if (!ht.match(re1)) { if (show == 1) jQuery(wm_el).fadeIn(time); } else { jQuery(wm_em).load(function() { if (show == 1) jQuery(wm_el).fadeIn(time); }) .error(function(){ jQuery(this).attr("src", ht); }) .attr("src", jQuery(wm_em).attr("name")); } } else { wm_em = jQuery(wm_el).find("embed"); if (jQuery(wm_em).length != 0) { if (show == 1) jQuery(wm_el).fadeIn(time); } else if (show == 1) { jQuery(wm_el).fadeIn(time); } } } function showImageSmall(index, max, page, show, time, first) { var paging = getPage(max, page); var start = paging[0]; var end = paging[1]; while (start < end) { downloadImageSmall(start++, show, time, first); } } function showImage(id, index, click, play, type, first) { /* var wm_el = jQuery("#" + id + " > div.imageb-div:eq(" + wmslide_prev + ")"); jQuery(wm_el).fadeOut(3000); jQuery(wm_el).animate({'opacity': 0.3}, {'duration': 3000, 'queue': false, complete: function() { jQuery(this).hide(); jQuery(this).css({'opacity':'1'}); } });*/ var wm_el = jQuery("#" + id + " > div.imageb-div:eq(" + index + ")"); if (jQuery(wm_el).length != 0) { jQuery(wm_el).css("opacity", '1'); if (first == 1 || click == 1) jQuery(wm_el).show(); else jQuery(wm_el).delay(1000).fadeIn(3000); } } function downloadImage(id, show, index, max, click, play, time, first, txtid) { if(index < max) { var wm_el = jQuery("#" + id + " > div.imageb-div:eq(" + index + ")"); var wm_tx = jQuery(wm_el).find("div.text"); var wm_bgtx = jQuery(wm_el).find("div.bgtext"); var wm_em = jQuery(wm_el).find("div.imager-div img"); if (jQuery(wm_em).length != 0) { var ht = jQuery(wm_em).attr("src"); var re1 = /blank\.png$/i; if (!ht.match(re1)) { if (play == 1) { if (show == 1) { downloadImage(id, 0, index+1, max, click, play, 0, first, ''); showImage(id, index, click, play, 1, first); showTextRight(id, index, click, first, time); showText(wm_bgtx, wm_tx, index, click, first, time); } } else if (show == 1) { showImage(id, index, click, play, 1, first); showTextRight(id, index, click, first, time); showText(wm_bgtx, wm_tx, index, click, first, time); } } else { if (show == 1) jQuery('#slide-load').show(); jQuery(wm_em).load(function() { wmslide_img[index] = 1; jQuery('#slide-load').hide(); jQuery(wm_el).removeClass("loading"); if (play == 1) { if (show == 1) { downloadImage(id, 0, index+1, max, click, play, 0, first, ''); showImage(id, index, click, play, 2, first); showTextRight(id, index, click, first, time); showText(wm_bgtx, wm_tx, index, click, first, time); } } else if (show == 1) { showImage(id, index, click, play, 2, first); showTextRight(id, index, click, first, time); showText(wm_bgtx, wm_tx, index, click, first, time); } }) .error(function(){ if (show == 1) jQuery('#slide-load').hide(); jQuery(this).attr("src", ht); }) .attr("src", jQuery(wm_em).attr("name")); } } else { wm_em = jQuery(wm_el).find("embed"); if (jQuery(wm_em).length != 0) { if (show == 1) { showImage(id, index, click, play, 2, first); showTextRight(id, index, click, first, time); showText(wm_bgtx, wm_tx, index, click, first, time); } } } if (show == 1) { wm_el = jQuery("#slide-number > div.images-div:eq(" + index + ")"); var wm_at = jQuery(wm_el).find("div.btn-act"); if (jQuery(wm_at).length != 0) { /*if (first != 1) jQuery(wm_at).css("opacity", '0.1'); jQuery(wm_at).attr("class", "btn-act sactive"); jQuery(wm_at).fadeTo(2500, 1);*/ if (click == 1 || first == 1) { jQuery(wm_at).attr("class", "btn-act sactive"); } else { jQuery(wm_el).delay(2000).fadeTo(100, 1, function() { jQuery(wm_at).attr("class", "btn-act sactive"); }); } } } } } function hideText(wm_bgtx, wm_tx, index, time) { if (jQuery(wm_tx).length != 0) { if (jQuery(wm_tx).html() != '') { jQuery(wm_tx).stop(); jQuery(wm_bgtx).fadeOut(time, "linear"); jQuery(wm_tx).fadeOut(time); } } } function showText(wm_bgtx, wm_tx, index, click, first, time) { if (jQuery(wm_tx).length != 0) { if (jQuery(wm_tx).html() != '') { jQuery(wm_tx).stop(); jQuery(wm_bgtx).attr("style", "opacity:0.6;filter:alpha(opacity=60);"); jQuery(wm_tx).attr("style", "opacity:0.8;filter:alpha(opacity=80);"); if (click == 1 || first == 1) { jQuery(wm_bgtx).attr("style", "display:block;opacity:0.6;filter:alpha(opacity=60);"); jQuery(wm_tx).attr("style", "display:block;opacity:0.8;filter:alpha(opacity=80);"); } else { jQuery(wm_bgtx).delay(3000).fadeIn(1000, function () { jQuery(wm_bgtx).attr("style", "display:block;opacity:0.6;filter:alpha(opacity=60);"); }); jQuery(wm_tx).delay(3000).fadeIn(1000, function () { jQuery(wm_bgtx).attr("style", "display:block;opacity:0.6;filter:alpha(opacity=60);"); jQuery(this).attr("style", "display:block;opacity:0.8;filter:alpha(opacity=80);"); }); } } } } function showTextRight(id, index, click, first, time) { var wm_tx = jQuery("#slide-welcome > div.textb-div:eq(" + index + ")"); if (jQuery(wm_tx).length != 0) { if (click == 1 || first == 1) { jQuery("#color-welcome").attr("class", "welcome color-welcome"+index); jQuery(wm_tx).show(); } else { jQuery(wm_tx).delay(2000).fadeTo(100, 1, function() { jQuery("#color-welcome").attr("class", "welcome color-welcome"+index); jQuery(wm_tx).show(); }); } } } function rotateSlide() { var first = wmslide_first; if ((wmslide_lastPos+1) >= wmslide_total) wmslide_lastPos = -1; if (wmslide_img[wmslide_lastPos+1] == 1) { wmslide_lastPos++; if (wmslide_first == 0) { var paging = getPage(wmslide_total, wmslide_page); resetPosColor(wmslide_prev, wmslide_lastPos, false, 1); } else { var paging = new Array(0,0); wmslide_first = 0; } var start = paging[0]; var end = paging[1]; if (wmslide_lastPos < start || wmslide_lastPos >= end) { jQuery("#slide-number > div.images-div").each(function(index) { if (jQuery(this).css("display") != "none") { jQuery("#slide-number > div.images-div:eq(" + index + ") > div").attr("class", "btn-over btn-down"); jQuery(this).hide(); } }); setPage(wmslide_lastPos+1); showImageSmall(wmslide_lastPos, wmslide_total, wmslide_page, 1, 600, first); if (wmslide_page+1 <= wmslide_last) showImageSmall(wmslide_lastPos, wmslide_total, wmslide_page+1, 0, 0, first); } downloadImage("slide-img", 1, wmslide_lastPos, wmslide_total, 0, 1, 1200, first, ''); wmslide_prev = wmslide_lastPos; if (first == 1) wmslide_fint = setTimeout(rotateSlide, 7000); else wmslide_fint = setTimeout(rotateSlide, 10000); } else { var wm_el = jQuery("#slide-img > div.imageb-div:eq(" + (wmslide_lastPos+1) + ")"); var wm_em = jQuery(wm_el).find("div.imager-div img"); if (jQuery(wm_em).length != 0) { var ht = jQuery(wm_em).attr("src"); var re1 = /blank\.png$/i; if (!ht.match(re1)) wmslide_fint = setTimeout(rotateSlide, 5000); else wmslide_lastPos++; } else wmslide_lastPos++; } } function stopQueue() { var wm_el = jQuery("#slide-img > div.imageb-div:eq(" + wmslide_lastPos + ")"); var wm_el2 = jQuery("#slide-img > div.imageb-div:eq(" + wmslide_prev + ")"); jQuery(wm_el).stop(); jQuery(wm_el2).stop(); } function stopSlide() { jQuery("#slide-number div.left-float:eq(0)").attr("class", "btn-play-down left-float"); stopQueue(); clearTimeout(wmslide_fint); } function playSlide() { jQuery("#slide-number div.left-float:eq(0)").attr("class", "btn-stop-down left-float"); stopQueue(); wmslide_lastPos--; wmslide_first = 1; rotateSlide(); } if (wmslide_total > 1) { if (wmslide_play == 1) playSlide(); jQuery("#slide-number div.images-div").each(function(index) { var cls = jQuery(this).attr("class"); jQuery(this).click(function() { stopVideo(jQuery("#slide-img > div.imageb-div:eq(" + wmslide_lastPos + ") > div.video > div.hdvideo"), 2); if (wmslide_play == 1) { stopSlide(); wmslide_play = 0; } else stopQueue(); resetPosColor(wmslide_prev, wmslide_lastPos, false, 0); wmslide_lastPos = index; downloadImage("slide-img", 1, wmslide_lastPos, wmslide_total, 1, wmslide_play, 1200, 0, ''); wmslide_prev = wmslide_lastPos; cls = jQuery(this).attr("class"); return false; }); jQuery(this).mouseover(function() { var wm_tx = jQuery(this).find("div.btn-over"); if (jQuery(wm_tx).length != 0) { jQuery(wm_tx).attr("class", "btn-over btn-up"); } }); jQuery(this).mouseout(function() { var wm_tx = jQuery(this).find("div.btn-over"); if (jQuery(wm_tx).length != 0) { jQuery(wm_tx).attr("class", "btn-over btn-down"); } }); }); jQuery("#slide-number div.left-float").each(function(index) { if (index == 0) { jQuery(this).click(function() { stopVideo(jQuery("#slide-img > div.imageb-div:eq(" + wmslide_lastPos + ") > div.video > div.hdvideo"), 2); if (wmslide_play == 1) { stopSlide(); wmslide_play = 0; } else { wmslide_play = 1; playSlide(); } return false; }); jQuery(this).mouseover(function() { var cls = jQuery(this).attr("class").substr(0, 8); jQuery(this).attr("class", cls+"-up left-float"); }); jQuery(this).mouseout(function() { var cls = jQuery(this).attr("class").substr(0, 8); jQuery(this).attr("class", cls+"-down left-float"); }); } else if (index == 1) { jQuery(this).click(function() { stopVideo(jQuery("#slide-img > div.imageb-div:eq(" + wmslide_lastPos + ") > div.video > div.hdvideo"), 2); if (wmslide_play == 1) { stopSlide(); wmslide_play = 0; } else stopQueue(); wmslide_page--; if (wmslide_page < 1) wmslide_page = 1; var pos = (wmslide_page-1) * wmslide_maxP; resetPosColor(wmslide_prev, wmslide_lastPos, true, 0); wmslide_lastPos = pos; downloadImage("slide-img", 1, wmslide_lastPos, wmslide_total, 1, 0, 1200, 0, ''); wmslide_prev = wmslide_lastPos; showImageSmall(wmslide_lastPos, wmslide_total, wmslide_page, 1, 600, 0); cls = jQuery(this).attr("class"); return false; }); jQuery(this).mouseover(function() { jQuery(this).attr("class", "left-up left-float"); }); jQuery(this).mouseout(function() { jQuery(this).attr("class", "left-down left-float"); }); } else if (index == 2) { jQuery(this).click(function() { stopVideo(jQuery("#slide-img > div.imageb-div:eq(" + wmslide_lastPos + ") > div.video > div.hdvideo"), 2); if (wmslide_play == 1) { stopSlide(); wmslide_play = 0; } else stopQueue(); wmslide_page++; if (wmslide_page > wmslide_last) wmslide_page = wmslide_last; var pos = (wmslide_page-1) * wmslide_maxP; resetPosColor(wmslide_prev, wmslide_lastPos, true, 0); wmslide_lastPos = pos; downloadImage("slide-img", 1, wmslide_lastPos, wmslide_total, 1, 0, 1200, 0, ''); wmslide_prev = wmslide_lastPos; showImageSmall(wmslide_lastPos, wmslide_total, wmslide_page, 1, 600, 0); cls = jQuery(this).attr("class"); return false; }); jQuery(this).mouseover(function() { jQuery(this).attr("class", "right-up left-float"); }); jQuery(this).mouseout(function() { jQuery(this).attr("class", "right-down left-float"); }); } }); } else { wmslide_play = 0; downloadImage("slide-img", 1, 0, wmslide_total, 0, wmslide_play, 1200, 1, ''); } /* jQuery("#slide-img > div.imageb-div").mouseover(function() { var wm_tx = jQuery(this).find("div.text"); if (jQuery(wm_tx).length != 0) { jQuery(wm_tx).stop(); jQuery(wm_tx).attr("style", "opacity:0.6;filter:alpha(opacity=60);"); jQuery(wm_tx).fadeIn(600, function () { jQuery(this).attr("style", "display:block;opacity:0.6;filter:alpha(opacity=60);"); }); } }); jQuery("#slide-img > div.imageb-div").mouseout(function() { var wm_tx = jQuery(this).find("div.text"); if (jQuery(wm_tx).length != 0) { jQuery(wm_tx).stop(); jQuery(wm_tx).fadeOut(600, function () { jQuery(this).attr("style", ""); }); } }); */ function stopVideo(obj, from) { var wm_hvideo = jQuery(obj).parent(); var wm_shvideo = jQuery(wm_hvideo).parent().find("div.shvideo"); if (jQuery(wm_hvideo).length != 0) { if (from == 1 && wmslide_play == 1) playSlide(); var wm_iframe = jQuery(wm_hvideo).find("iframe"); jQuery(wm_hvideo).hide(); toggleVideo(wm_iframe, 'hide'); } if (jQuery(wm_shvideo).length != 0) { jQuery(wm_shvideo).show(); } } function toggleVideo(wm_iframe, state) { var iframe = wm_iframe[0].contentWindow; func = state == 'hide' ? 'pauseVideo' : 'playVideo'; iframe.postMessage('{"event":"command","func":"' + func + '","args":""}','*'); } jQuery("#slide-img > div.imageb-div > div.shvideo").mouseover(function() { var wm_svideo = jQuery(this).parent().find("div.video"); if (jQuery(wm_svideo).length != 0) { if (wmslide_play == 1) stopSlide(); var wm_iframe = jQuery(wm_svideo).find("iframe"); jQuery(this).hide(); jQuery(wm_svideo).show(); toggleVideo(wm_iframe); } }); jQuery("#slide-img > div.imageb-div > div.video > div.hdvideo").mouseover(function() { stopVideo(jQuery(this), 1); }); });